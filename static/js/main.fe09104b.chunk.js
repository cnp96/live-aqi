(this["webpackJsonplive-aqi"]=this["webpackJsonplive-aqi"]||[]).push([[0],{14:function(e,t,n){},18:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(5),i=n.n(r),o=(n(14),n(2)),s=n(6),d=n(9),l=n(7),j=function(e,t){switch(t.type){case"update":var n,c=new Date,a=t.payload,r=Object(l.a)(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i.city]={aqi:i.aqi,lastUpdated:c}}}catch(o){r.e(o)}finally{r.f()}return Object(d.a)({},e);default:return e}},u=(n(18),n(8)),b=function(e){var t=((new Date).valueOf()-e.valueOf())/1e3,n=t/60;return t<=1?"now":t<60?"".concat(0^t," second(s) ago"):n<60?"".concat(0^n," minute(s) ago"):"at ".concat(e.toISOString())},h=n(0),O=c.memo((function(e){var t=e.data,n=Object.entries(t);return Object(h.jsxs)("table",{className:"styled-table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Index"}),Object(h.jsx)("th",{children:"City"}),Object(h.jsx)("th",{children:"Current AQI"}),Object(h.jsx)("th",{children:"Last Updated"}),Object(h.jsx)("th",{children:"Action"})]})}),Object(h.jsx)("tbody",{children:n.length?n.map((function(e,t){var n,c=Object(o.a)(e,2),a=c[0],r=c[1],i=(n=r.aqi)<=50?"good":n<=100?"satisfactory":n<=200?"moderate":n<=300?"poor":n<=400?"very-poor":"severe";return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t}),Object(h.jsx)("td",{children:Object(u.capitalize)(a)}),Object(h.jsx)("td",{className:"aqi ".concat(i),children:r.aqi.toFixed(2)}),Object(h.jsx)("td",{children:b(r.lastUpdated)}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{children:"Live chart"})})]},t)})):Object(h.jsx)("tr",{children:Object(h.jsx)("td",{colSpan:5,children:Object(h.jsx)("div",{className:"w-100 d-flex justify-center",children:"Please wait..."})})})})]})}));function f(){var e,t=Object(c.useReducer)(j,{}),n=Object(o.a)(t,2),a=n[0],r=n[1],i=function(e){r({type:"update",payload:e})},d=function t(n){return(e=new s.w3cwebsocket("wss://city-ws.herokuapp.com")).onopen=function(){console.log("WebSocket Client Connected")},e.onmessage=function(e){var t=JSON.parse(e.data);n&&n(t)},e.onerror=function(t){e.close(3001),console.error(t)},e.onclose=function(n){if(n.code<3e3)var c=setInterval((function(){3===e.readyState?(console.log("Reconnecting to server"),e=t(i)):clearInterval(c)}),500)},e};return Object(c.useEffect)((function(){return e=d(i),function(){e.close(3e3),console.log("Client disconnected")}}),[]),Object(h.jsxs)("main",{children:[Object(h.jsx)("h1",{children:"Air Quality Index"}),Object(h.jsx)("div",{className:"overview",children:Object(h.jsx)(O,{data:a})})]})}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(f,{})}),document.getElementById("root")),x()}},[[22,1,2]]]);
//# sourceMappingURL=main.fe09104b.chunk.js.map